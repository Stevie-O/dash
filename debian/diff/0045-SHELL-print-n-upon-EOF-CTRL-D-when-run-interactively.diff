From e645a3e0d53bb2a025631eb6707cb0497ff15b1d Mon Sep 17 00:00:00 2001
From: Gerrit Pape <pape@smarden.org>
Date: Wed, 11 Feb 2009 01:38:49 +0000
Subject: [SHELL] print \n upon EOF (CTRL-D) when run interactively

Suggested by jidanni through
 http://bugs.debian.org/476422

Signed-off-by: Gerrit Pape <pape@smarden.org>
Signed-off-by: Jonathan Nieder <jrnieder@gmail.com>
---
 src/main.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

diff --git a/src/main.c b/src/main.c
index b38dc27..1614ffb 100644
--- a/src/main.c
+++ b/src/main.c
@@ -227,8 +227,15 @@ cmdloop(int top)
 			if (!top || numeof >= 50)
 				break;
 			if (!stoppedjobs()) {
-				if (!Iflag)
+				if (!Iflag) {
+					if (iflag) {
+						out2c('\n');
+#ifdef FLUSHERR
+						flushout(out2);
+#endif
+					}
 					break;
+				}
 				out2str("\nUse \"exit\" to leave shell.\n");
 			}
 			numeof++;
-- 
1.7.4.1

