From 0150a7be130d6c54e286ca9fe5d72ba80f84ccf9 Mon Sep 17 00:00:00 2001
From: Alexey Gladkov <legion@altlinux.org>
Date: Thu, 4 Oct 2007 14:21:44 +0800
Subject: [PATCH] [BUILD] Add --enable-static option to configure.

Add new option to build statical linked dash.
---
 ChangeLog    |    4 ++++
 configure.ac |    6 ++++++
 2 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index cf56c9a..ac717c5 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,7 @@
+2007-10-04  Alexey Gladkov <legion@altlinux.org>
+
+	* Add --enable-static option to configure.
+
 2007-09-26  Herbert Xu <herbert@gondor.apana.org.au>
 
 	* Recognise here-doc delimiters terminated by EOF.
diff --git a/configure.ac b/configure.ac
index e0a94a8..5e8f17d 100644
--- a/configure.ac
+++ b/configure.ac
@@ -18,6 +18,12 @@ fi
 AC_MSG_RESULT(${CC_FOR_BUILD})
 AC_SUBST(CC_FOR_BUILD)
 
+AC_ARG_ENABLE(static, AS_HELP_STRING(--enable-static, \
+				     [Build statical linked program]))
+if test "$enable_static" = "yes"; then
+	export LDFLAGS="-static -Wl,--fatal-warnings"
+fi
+
 dnl Checks for libraries.
 
 dnl Checks for header files.
-- 
1.5.3.7

